name: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ

on:
  workflow_run:
    workflow: "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —ç—Å—Å–µ –≠–ª–∞—Ä—ã"
    types:
      - completed
  workflow_dispatch:

jobs:
  post-to-vk:
    if: workflow_run.conclusion == 'success'
    runs-on: ubuntu-latest
    steps:
      - name: üîπ Checkout –∫–æ–¥–∞
        uses: actions/checkout@v4

      - name: üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        run: |
          pip install requests

      - name: üîπ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –í–ö
        env:
          VK_GROUP_ID: ${{ secrets.VK_GROUP_ID }}
          VK_ACCESS_TOKEN: ${{ secrets.VK_ACCESS_TOKEN }}
        run: |
          python vk_poster.py
